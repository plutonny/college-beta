<!DOCTYPE html>
<html lang="ru">
    <head>
        <meta                                       charset="UTF-8">
        <meta   http-equiv="Permissions-Policy"     content="interest-cohort=()">
        <meta   name="viewport"                     content="width=device-width, initial-scale=1.0">
        <meta   name="author"                       content="Plutonny">
        <meta   name="keywords"                     content="КСК-11, кск, кск 11, акт кск, акт">
        <meta   name="description"                  content="Главная, КСК-11">
        <meta   name="theme-color" id="theme-color" content="#202020">

        <title  id="csc11-title-of-page"            >Главная, КСК-11</title>
        <link   rel="preload prefetch" as="font"    href="/assets/fonts/n2.woff2" type="font/woff2" crossorigin="anonymous">
        <link   rel="preload prefetch" as="font"    href="/assets/fonts/m2.woff2" type="font/woff2" crossorigin="anonymous">
        <link   rel="manifest"                      href="/college-beta/manifest.json">
        <script type="text/javascript"              src="/assets/solar.js"></script>
        <script type="text/javascript"              src="/assets/luxon.js"></script>

        <link   rel="icon"                          href="/college-beta/csc11-favicon.png">
        <link   rel="preload prefetch stylesheet"   href="/assets/beta/main.css" as="style">
        
        <script> var thisPageBuild = 76; </script>
        
        <style  id="root-colors-theme"></style>
        
        <script type="text/javascript"              src="/assets/beta/debug.js"></script>
        <script type="text/javascript"              src="/assets/beta/storage.js"></script>
        <script type="text/javascript"              src="/assets/beta/timetable.js"></script>

        <noscript>
            <style>
                html, body { background-color: #202020; }
                p, a       { color: #f4f4f4; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; font-size: 28px; text-align: center; }
                div        { margin-top: 64px; }
            </style>
            <div>
                <p>Если ты читаешь этот текст, то у тебя отключен или не поддерживается браузером JavaScript</p>
                <p>Функционал данного сайта недоступен, можете перейти на <a href="/college/simpleoutjs.html">упрощенную страницу</a></p>
            </div>
        </noscript>
    </head>
    <body>
        <div class="modal" id="modal"></div>
        <div class="header" id="header">
            <script>
            var headerUsername = '', headerGretings = '';
            var month = ['января', 'февраля', 'марта', 'апреля', 'мая', 'июня', 'июля', 'августа', 'сентября', 'октября', 'ноября', 'декабря']
                 if (!deviceStorage('check', 'username'))                   { headerUsername += `, ${deviceStorage('get', 'username')}` }
                 if (CURRDATE.getHours() >= 5  && CURRDATE.getHours() < 12) { headerGretings += `Доброе утро` } 
            else if (CURRDATE.getHours() >= 12 && CURRDATE.getHours() < 17) { headerGretings += `Добрый день` } 
            else if (CURRDATE.getHours() >= 17 && CURRDATE.getHours() < 22) { headerGretings += `Добрый вечер`} 
            else                                                            { headerGretings += `Доброй ночи` }
            header(`${headerGretings}${headerUsername}!`, true, false);
        </script>
        </div>
        <div class="navbar" id="navbar"><script>navbar('home')</script></div>
        <div class="greeting" id="greeting">
            <script>
            var greetingFirst = '', greetingSecond = ''
              if (CURRDATE.getDay() == 0) { greetingFirst = 'Сегодня пар нет' } 
            else                          { greetingFirst = pairGet('timeCurrent') }
            greetingSecond = `${CURRDATE.getDate()} ${month[CURRDATE.getMonth()]}, ${WEEK.name.RU} неделя`
            output('greeting', `
                <style>
                    .greeting { height: calc(15vh + 64px); padding-left: 24px; display: flex; flex-direction: column; flex-wrap: nowrap; justify-content: center; align-items: flex-start; }
                </style>
                <a style="font-size:28px; margin:0px; text-decoration: none;" href="/college${betaRepos}/timetable/?q=alerts">${greetingFirst}</a>
                <p style="font-size:16px; margin:0px;">${greetingSecond}</p>
            `)
        </script>
        </div>
        <div class="content" id="content"></div>
        
        
        <script>
            var pairTitle = '', pairWeekNum = 0;
                 if (CURRDATE.getDay() == 0)                        { pairTitle = 'Пары завтра:'; pairWeekNum = 1 }
            else if (CURRDATE.getDay() == 6) {
                  if (pairGet('timeCurrent') == 'Пары закончились') { pairTitle = 'Пары в понедельник:'; pairWeekNum = 1 }
                else                                                { pairTitle = 'Пары сегодня:'; pairWeekNum = 6 }
            } else {
                  if (pairGet('timeCurrent') == 'Пары закончились') { pairTitle = 'Пары завтра:'; pairWeekNum = CURRDATE.getDay() + 1 }
                else                                                { pairTitle = 'Пары сегодня:'; pairWeekNum = CURRDATE.getDay() }
            }

            output('content', `
                <style>
                    .content { background-color: var(--secondary-bg-color); border-top-left-radius: 24px; border-top-right-radius: 24px; padding: 24px 24px 73px 24px; margin-top: 8px; min-height: calc(100vh - 100px); }
                </style>
                <p style="margin: 0px 0px 24px 0px; font-size: 22px;">${pairTitle}</p>

                ${pairHTML(pairGet('pairOfDay', [pairWeekNum, CURRDATE.getDay() == 0 ? WEEK.name.alt.EN : WEEK.name.EN]))}

                <div style="display: flex; justify-content: center;">
                    <button style="margin: 24px 0px; font-family: 'Montserrat' !important; cursor: pointer; border: none; border-radius: 16px; height: 42px; font-size: 20px; width: 100%;" onclick="location.assign('/college${betaRepos}/timetable/?q=week')">Все пары</button>
                </div>
            `)
        </script>

        <script>
            if (deviceStorage('get', 'noDisplayUpdate30') != 'true') { modal('max', `
                <div style=" margin-right: 7%; margin-left: 7%; max-height: 95%; overflow-y: auto; background-color: var(--primary-bg-color); border: none; border-radius: 24px; box-shadow: 0px 0px 8px var(--navbar-box-color);">
                    <h2 style="font-family: 'Montserrat' !important; text-align: center; margin:16px;">Вышло обновление!</h2>
                    <h1 style="font-family: 'Montserrat' !important; text-align: center; margin:2px; font-size: 52px">${storageVersion}</h1>
                    <b style="font-family: 'Montserrat' !important; margin-left:16px;">Изменения:</b>
                    <ul style="margin-left:12px;">
                        <li style="font-family: 'Montserrat' !important;">Все написано с нуля</li>
                        <li style="font-family: 'Montserrat' !important;">Новый дизайн</li>
                        <li style="font-family: 'Montserrat' !important;">Удобная навигация</li>
                        <li style="font-family: 'Montserrat' !important;">Много оптимизации</li>
                    </ul>
                    <p style="margin-left:22px;margin-right:22px;">
                        <b style="font-family: 'Montserrat' !important;">Переустановите приложение, чтобы избежать ошибок! </b>
                        <a href="/college${betaRepos}/support/?q=reinstall" style="font-family: 'Montserrat' !important; text-decoration: underline 2px solid var(--root-text-color);">Как это сделать?</a>
                    </p>
                    <div style="display: flex; justify-content: center;">
                        <button style="font-family: 'Montserrat' !important; cursor: pointer; border: none; border-radius: 24px; height: 36px; font-size: 17px; width: 256px; margin: 4px 16px 16px 16px;" onclick="deviceStorage('write', 'noDisplayUpdate30', 'true'); document.getElementById('modal').innerHTML = ''; theme('load')">Больше не показывать</button>
                    </div>
                </div>
                `) 
            }
        </script>

        <script>
            deviceStorage('write', 'homeBuildPage', thisPageBuild)
        </script>
    </body>
</html>